/*
 * @package ezbox
 * @version 0.1
 * @author Richard Denton / eMarketeer Australia
 * @license
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013 Richard Denton / eMarketeer Australia (emarketeer.com.au)
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
$(document).ready(function(){$(document.body).append('<div id="ezbox-lightbox" class="ezbox-lightbox"><div id="ezbox-loading" class="ezbox-loading"></div><div id="ezbox-image-wrapper" class="ezbox-image-wrapper"><div id="ezbox-close" class="ezbox-close"></div><img src="" alt="" id="ezbox-image" class="ezbox-image" /></div></div>');ezbox_img=null;ezbox_status=0;$("[data-rel=ezbox]").click(function(d){d.preventDefault();c(this.href);});$("#ezbox-lightbox").click(function(){b();});$("#ezbox-image").click(function(d){d.stopPropagation();});$(window).resize(function(){b();});function c(d){if(window.ezbox_status!=0){return false;}$("#ezbox-image-wrapper").hide();$("#ezbox-image").attr("src","");$("#ezbox-loading").show();$("#ezbox-lightbox").fadeIn(250);window.ezbox_status=1;ezbox_img=new Image();ezbox_img.src=d;ezbox_img.onload=function(){a(d,ezbox_img);};}function a(d,e){$("#ezbox-loading").fadeOut(250,function(){$("#ezbox-image").css("width","");$("#ezbox-image").css("height","");var i=e.width;var o=e.height;var k=$(window).height();var l=$(window).width();var h=(k/100)*90;var f=(l/100)*90;var j=e.width-f;var m=e.height-h;if(e.width>=l||e.height>=k){if(j>m){$("#ezbox-image").css("width",f+"px");i=f;ezbox_scale=(f/e.width)*100;o=(o/100)*ezbox_scale;}else{$("#ezbox-image").css("height",h+"px");o=h;ezbox_scale=(h/e.height)*100;i=(i/100)*ezbox_scale;}}var n=(i/2)+10;var g=(o/2)+10;$("#ezbox-image-wrapper").css("margin-left","-"+n+"px");$("#ezbox-image-wrapper").css("margin-top","-"+g+"px");$("#ezbox-image").attr("src",e.src);$("#ezbox-image-wrapper").fadeIn(250);window.ezbox_status=2;});}function b(){if(window.ezbox_status!=0){$("#ezbox-lightbox").fadeOut(250,function(){window.ezbox_status=0;});}}});